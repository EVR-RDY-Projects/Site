<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EVR:RDY â€” Defend Forward Â· Advance Always</title>
<meta name="description" content="EVR:RDY â€” Veteran-led OT/ICS cyber defense. Low-cost solutions for critical infrastructure. T.A.P.S., TacSOC, R.A.I.D. framework, Hunter/Killer teams." />

<link rel="stylesheet" href="assets/css/enhanced-style.css">
<link rel="stylesheet" href="assets/css/overlay-reveal.css">
</head>
<body>

<header class="hero parallax" data-speed="0.5">
  <div class="container">
    <div class="hero-content animate-fade-in-up parallax" data-speed="0.3">
    <img src="assets/img/banner.png" alt="EVR:RDY â€” Defend Forward Â· Advance Always">
    </div>
  </div>
</header>

<main class="content-wrap">
  <div class="container">

    <!-- Mission Section -->
<section class="card animate-slide-up">
  <h2>Our Mission</h2>
  <p>
    EVR:RDY is a veteran-led, open-source defensive cyber initiative focused on OT/ICS.  
    Our mission is to deliver low-cost, practical solutions for defending critical infrastructure by uniting veteran expertise with civilian innovation.
  </p>

  <blockquote class="mission-quote center-justify">
    We have done so much, for so long, with so little, we are now qualified to do anything with nothing.<br>
    <span style="color:#aaa; font-size:1em;">â€“ Frank Sinatra</span>
  </blockquote>

  <p>
    If you have the desire to contribute to this mission and help protect critical infrastructure, then step forward and become a contributor.
  </p>

  <div class="btn-row text-center">
    <button class="learn-more-btn animate-glow" onclick="openTeamModal()">Meet Our Team</button>
    <button class="learn-more-btn animate-glow" onclick="window.location.href='mailto:ops@evrrdy.com'">Join the FIGHT</button>
  </div>
</section>


    

    <section class="card animate-slide-up challenge-section" id="challenge">
      <overlay-reveal fit="fit" mode="primary-only" css="assets/css/overlay-reveal.css">
        <div slot="primary">
        <h2>The Challenge</h2>
        <p>Critical infrastructure faces three major cybersecurity challenges that traditional solutions fail to address effectively.</p>
          <div class="challenge-grid" data-or-grid>
          <div class="challenge-card animate-slide-left animate-stagger-1">
            <h3>Underfunding</h3>
            <p>Most organizations do not allocate or have the funds to properly secure ICS/OT, leaving critical areas under-resourced.</p>
          </div>
          <div class="challenge-card animate-slide-up animate-stagger-2">
            <h3>High Cost Solutions</h3>
            <p>Leading OT/ICS cybersecurity platforms often start out of the range of small organization.</p>
          </div>
          <div class="challenge-card animate-slide-right animate-stagger-3">
            <h3>Workforce Shortage</h3>
            <p>The U.S. faces a cybersecurity workforce gap of <span class="counter" data-target="500000">0</span>+ unfilled jobs, with 67% of organizations reporting shortages.</p>
          </div>
        </div>
      </div>
      </overlay-reveal>
    </section>

      <section class="card animate-slide-up challenge-section" id="challenge">
            
        <overlay-reveal fit="fit" mode="primary-only" css="assets/css/overlay-reveal.css">
          <div slot="primary">
            <h2>Our Solution</h2>
            <p>Two lines of effort: T.A.P.S. (Telemetry Acquisition Platform Solution) and TacSOC (Tactical Security Operations Center).</p>
            <div class="challenge-grid" data-or-grid>
              <div class="solution-card animate-slide-left animate-stagger-1">
                <h3>Affordable Protection</h3>
                <p><a href="#" onclick="openModalToSection('tacsoc-section')" class="solution-link">TacSOC</a> pools customers, leveraging Chronicle to share licenses and undercut costs.</p>
              </div>
              <div class="solution-card animate-slide-up animate-stagger-2">
                <h3>Low-Cost Infrastructure</h3>
                <p><a href="#" onclick="openModalToSection('taps-section')" class="solution-link">SEER, GHOST and RAMPART</a> replace expensive OT appliances with affordable with opensourced alternatives. <a href="#" onclick="openModalToSection('taps-section')" class="solution-link">T.A.P.S</a> avoids expensive OT sensing solutions .</p>
              </div>
              <div class="solution-card animate-slide-right animate-stagger-3">
                <h3>Scalable Talent Pipeline</h3>
                <p><a href="#" onclick="openModalToSection('tacsoc-section')" class="solution-link">TacSOC</a> automates Tier-1, accelerates analysts from Tier-2 to Tier-3 through mentorship, and spins up new Hunter/Killer Teams â€” multiplying skilled defenders faster than traditional pipelines.</p>
              </div>
            </div>
              <p class="text-center" >
                <button class="learn-more-btn animate-glow" onclick="openProductsModal()">Learn More</button>
              </p>
          </div>
        </overlay-reveal>
    </section>


    <!-- Structure Overview -->
    <section class="card animate-slide-up challenge-section" id="challenge">
      <overlay-reveal fit="fit" mode="primary-only" css="assets/css/overlay-reveal.css">
        <div slot="primary">
      <h2>Our Structure</h2>
      <p>EVR:RDY is built on a dualâ€‘track model working together to solve the toughest challenges in critical infrastructure defense.</p>
            <div class="challenge-grid" data-or-grid>
        <div class="structure-card nonprofit animate-slide-left animate-stagger-1">
          <h3>Defensive Operations Group</h3>
          <p>This is our current effort to develop opensource and affordable infrastructure. While open source is powerful, most businesses need a trusted partner like EVR:RDY TacSOC and vendor-backed support. Revenue fuels the ability to safeguard more networks, provide competitive pay, and share equity with employees. Many organizations wonâ€™t adopt open source alone because they donâ€™t have the resources or workforce to maintain it â€” thatâ€™s where we step in..</p>
        </div>
        <div class="structure-card forprofit animate-slide-right animate-stagger-2">
          <h3>Foundation for Critical Infrastructure Defense</h3>
          <p>Future non-profit arm will pursues grants, partnerships, and collaborations to build training pipelines for veterans and civilians. This includes outreach to the veteran community, creating pathways into cyber careers. Together, these efforts expand workforce development and strengthen critical infrastructure defense.</p>
        </div>
      </div>
      <p><em>The vision:</em> Mission and market reinforce each other â€” open collaboration drives innovation while sustainable services scale protection.</p>
          </div>
        </overlay-reveal>
      </section>

    <section class="card animate-slide-up challenge-section" id="challenge">
      <overlay-reveal fit="fit" mode="primary-only" css="assets/css/overlay-reveal.css">
        <div slot="primary">
      <h2>Become Part of the Work</h2>
      <p>We seek talented, passionate individuals from academia and the ICS cybersecurity industry to collaborate, contribute, and lead as part of the EVR:RDY Foundation. This includes opportunities to serve as board members, guide our open-source OT security projects, and help shape training pipelines for both veterans and civilians.</p>
            
            <!-- Closing Quote -->
              <blockquote class="closing-quote center-justify">
                The strongest steel is forged in the hottest dumpster fire.<br>
                <span style="color:#aaa; font-size:.9em;">â€“ Unknown</span>
              </blockquote>
            
            <p>This isn't about buzzwords or bloated security stacks; The EVR:RDY culture is built on the mindset of doing more with less. We apply the same grit, discipline, and resourcefulness leveraged to find innovative solutions while in uniform and bring them to the defense of critical infrastructure.</p>
            
            <p class="text-center"><button class="learn-more-btn animate-glow" onclick="window.location.href='mailto:ops@evrrdy.com'">Get in Touch</button></p>
          </div>
      </overlay-reveal>
    </section>


    <!-- Resources Section -->
    <section class="card animate-slide-up">
      <h2>Resources & Documentation</h2>
      <p>Access our latest white papers, company updates, and technical documentation.</p>
      
      <!-- <div class="challenge-grid">
        <div class="solution-card animate-slide-left animate-stagger-1">
          <h3>Technical Documentation</h3>
          <p>Comprehensive guides and specifications for our open-source tools and platforms.</p>
        </div>
        <div class="solution-card animate-slide-up animate-stagger-2">
          <h3>White Papers</h3>
          <p>In-depth analysis and research on critical infrastructure cybersecurity challenges and solutions.</p>
        </div>
        <div class="solution-card animate-slide-right animate-stagger-3">
          <h3>Company Updates</h3>
          <p>Latest news, product releases, and strategic developments from EVR:RDY.</p>
        </div>
      </div> -->
      
      <button class="learn-more-btn animate-glow" onclick="openResourcesModal()">View Resources</button>
    </section>


  </div>
</main>



<footer class="text-center" style="color:var(--muted); font-size:.95rem; margin: var(--space-lg) 0 var(--space-xl); padding-top: var(--space-lg); border-top: 1px solid rgba(229,228,216,.12);">
  Â© <span id="y"></span> EVR:RDY - Let Us help keep the lights on!
</footer>

<!-- Products Modal -->
<div id="products-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Our Products</h2>
      <button class="modal-close" onclick="closeProductsModal()">&times;</button>
    </div>
    <div class="modal-body">
      
      <!-- Products Grid -->
      <div class="products-grid">
        
        <!-- T.A.P.S. Section -->
        <div class="product-section" id="taps-section">
          <div class="product-header">
            <h3>T.A.P.S.</h3>
            <p class="product-subtitle">Telemetry Acquisition Platform Solution</p>
            <p class="product-description">A suite of openâ€‘source tools being developed to create lowâ€‘cost, practical solutions that move critical telemetry from the OT environment into the IT environment for safe ingestion into a SIEM.</p>
            <button class="learn-more-btn animate-glow" onclick="toggleProductDetails('taps-details')">Learn More</button>
          </div>
          
          <div class="product-details" id="taps-details" style="display: none;">
            <div class="components-grid">
              <div class="component-card">
                <div class="component-header">
                  <h4>SEER Sensor</h4>
                  <span class="status-indicator poc">PoC</span>
                </div>
                <p class="component-subtitle">Scalable Endpoint & Environmental Reconnaissance</p>
                <p class="component-description">Provides lowâ€‘cost visibility for OT/ICS and IT networks by capturing mirrored traffic, generating Zeekâ€‘style logs, ingesting JSON from endpoints, and storing forensic data locally.</p>
                <div class="component-benefit">
                  <strong>Why it matters:</strong> Smaller utilities and DoDâ€‘critical infrastructure sites gain OT visibility without enterpriseâ€‘level licensing costs.
                </div>
              </div>

              <div class="component-card">
                <div class="component-header">
                  <h4>GHOST Node</h4>
                  <span class="status-indicator poc">PoC</span>
                </div>
                <p class="component-subtitle">Hardwareâ€‘Enforced Data Diode</p>
                <p class="component-description">A hardwareâ€‘enforced data diode for unidirectional UDP flow, built from inexpensive media converters, switches, and fiber.</p>
                <div class="component-benefit">
                  <strong>Why it matters:</strong> Provides a physical security guarantee that data flows only one way â€” safeguarding OT environments while enabling centralized monitoring.
                </div>
              </div>

              <div class="component-card">
                <div class="component-header">
                  <h4>RAMPART</h4>
                  <span class="status-indicator development">Active Development</span>
                </div>
                <p class="component-subtitle">Resilient Architecture for Monitoring & Proactive Advanced Response Teams</p>
                <p class="component-description">Bridges the GHOST Diode and the SIEM of choice (currently Google Chronicle). Packages data for SIEM and allows remote PCAP analysis from SEER without breaking OT isolation.</p>
                <div class="component-benefit">
                  <strong>Why it matters:</strong> Ensures telemetry can be safely centralized, normalized, and analyzed for proactive monitoring and forensics.
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- TacSOC Section -->
        <div class="product-section" id="tacsoc-section">
          <div class="product-header">
            <h3>TacSOC</h3>
            <p class="product-subtitle">Tactical Security Operations Center</p>
            <p class="product-description">EVR:RDY's first flagship product: an AI-enforced, OT-focused SOC built for precision threat hunting, incident response, and real defense. Where traditional SOCs drown in alerts, TacSOC runs lean.</p>
            <button class="learn-more-btn animate-glow" onclick="toggleProductDetails('tacsoc-details')">Learn More</button>
          </div>
          
          <div class="product-details" id="tacsoc-details" style="display: none;">
            <div class="features-grid">
              <div class="feature-card">
                <h4>AI Integration</h4>
                <p class="feature-description">Uses advanced AI models to deduplicate and enrich telemetry, map events to MITRE ATT&CK, and automatically dismiss noise.</p>
                <div class="feature-benefit">
                  <strong>Result:</strong> Analysts focus on true threats, enabling faster detection and resilient defenses.
                </div>
              </div>

              <div class="feature-card">
                <h4>Resource Pooling</h4>
                <p class="feature-description">Leverages cloudâ€‘native SIEMs â€” currently Google Chronicle â€” to enable license sharing across customers.</p>
                <div class="feature-benefit">
                  <strong>Result:</strong> Provides enterpriseâ€‘grade monitoring without enterpriseâ€‘grade costs.
                </div>
              </div>

              <div class="feature-card">
                <h4>Hunter/Killer Teams</h4>
                <p class="feature-description">Small, skilled groups blending Tierâ€‘2 and Tierâ€‘3 analysts under a Team Leader. AI takes Tier-1 work off the table, accelerating progression and scaling defense to many sites.</p>
                <div class="feature-benefit">
                  <strong>Result:</strong> TacSOC is both a defense platform and a training engine.
                </div>
              </div>

              <div class="feature-card">
                <h4>R.A.I.D. Framework</h4>
                <p class="feature-description">Recon, Acquire, Interpret, Defend â€” a systematic approach to threat hunting and defense operations.</p>
                <div class="feature-benefit">
                  <strong>Result:</strong> Enables small, distributed teams to operate with autonomy and accountability without massive centralized SOCs.
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>


    </div>
  </div>
</div>

<!-- Resources Modal -->
<div id="resources-modal" class="modal" onclick="closeResourcesModal()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <div class="modal-header">
      <h2>Available Resources</h2>
      <button class="close-btn" onclick="closeResourcesModal()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="resources-grid" id="resources-grid">
        <!-- Resources will be dynamically loaded here -->
      </div>
    </div>
  </div>
</div>

           <!-- Expanded Resource Content -->
           <div id="expanded-resource" class="expanded-resource" onclick="closeExpandedResource()">
             <div class="expanded-resource-content" onclick="event.stopPropagation()">
               <button class="close-expanded-btn" onclick="closeExpandedResource()">&times;</button>
               <div id="expanded-resource-content" class="markdown-content">
                 <!-- Expanded resource content will be loaded here -->
               </div>
             </div>
           </div>

<!-- Team Modal -->
<div id="team-modal" class="modal" onclick="closeTeamModal()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <div class="modal-header">
      <h2>The Team</h2>
      <button class="modal-close" onclick="closeTeamModal()">&times;</button>
    </div>
    <div class="modal-body">
      <p class="team-intro">Defensive cyber professionals with real-world operational experience in critical infrastructure protection.</p>
      
      <div class="team-grid team-grid-two">
        <div class="team-member">
          <!--<div class="veteran-badge">Volunteer</div> -->
          <div class="member-photo">
            <div class="photo-placeholder">
              <img src="assets/img/erin-burns.jpeg" alt="Erin Burns" class="member-photo-img erin-photo">
            </div>
            <div class="member-badge">Founder</div>
            <div class="member-badge">Master Host Analyst</div>
          </div>
          <div class="member-info">
            <h3 class="member-name--sm">RXJpbiBCdXJucw==</h3>
            <div class="member-credentials">
              <span class="credential">Leadership</span>
              <span class="credential">Operations</span>
              <span class="credential">Strategy</span>
              <span class="credential">Architecture</span>
              <span class="credential">Systems</span>
              <span class="credential">Cybersecurity</span>
            </div>
          </div>
        </div>

        <div class="team-member">
          <!-- <div class="veteran-badge">Veteran</div> -->
          <div class="member-photo">
            <div class="photo-placeholder">
              <img src="assets/img/timothy-deberry.jpeg" alt="Timothy DeBerry" class="member-photo-img timothy-photo">
            </div>
            <div class="member-badge">Principal Developer</div>
            <div class="member-badge">Founding Engineer</div>
          </div>
          <div class="member-info">
            <h3 class="member-name--sm">VGltb3RoeSBEZUJlcnJ5</h3>
            <div class="member-credentials">
              <span class="credential">Leadership</span>
              <span class="credential">Development</span>
              <span class="credential">Integration</span>
              <span class="credential">Automation</span>
              <span class="credential">Secure Coding</span>
              <span class="credential">Secure Design</span>
            </div>
          </div>
        </div>

        <div class="team-member">
          <!-- <div class="veteran-badge">Veteran</div> -->
          <div class="member-photo">
            <div class="photo-placeholder">
              <img src="assets/img/shayla-lapoint.jpeg" alt="Shayla LaPoint" class="member-photo-img shayla-photo">
            </div>
            <div class="member-badge">Lead Security Engineer</div>
            <div class="member-badge">Master Network Analyst</div>
          </div>
          <div class="member-info">
            <h3 class="member-name--sm">U2hheWxhIExhUG9pbnQ=</h3>
            <div class="member-credentials">
              <span class="credential">Leadership</span>
              <span class="credential">Secure Architecture</span>
              <span class="credential">Network Analysis</span>
              <span class="credential">Threat Modeling</span>
              <span class="credential">Incident Response</span>
              <span class="credential">Digital Forensics</span>
            </div>
          </div>
        </div>
      </div>
      <p class="text-center" style="margin-top: var(--space-xs);">
        <button class="learn-more-btn animate-glow" onclick="window.location.href='mailto:ops@evrrdy.com'">Get in Touch</button>
      </p>
    </div>
  </div>
</div>

<script src="assets/js/overlay-reveal.js" defer></script>
<script src="assets/js/enhanced.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
<script>
// Product Details Toggle Function (Accordion behavior)
function toggleProductDetails(detailsId) {
  const details = document.getElementById(detailsId);
  const button = event.target;
  
  // Get all product detail sections and their buttons
  const allDetails = document.querySelectorAll('.product-details');
  const allButtons = document.querySelectorAll('.learn-more-btn');
  
  // If the clicked section is already open, close it
  if (details.style.display === 'block') {
    details.style.display = 'none';
    // Restore original label if available
    if (button && button.dataset && button.dataset.originalText) {
      button.textContent = button.dataset.originalText;
    } else {
      button.textContent = button.textContent.replace('Show Less', 'Learn More');
    }
  } else {
    // Close all other sections first
    allDetails.forEach(section => {
      section.style.display = 'none';
    });
    
    // Reset all button text
    allButtons.forEach(btn => {
      if (btn && btn.dataset && btn.dataset.originalText) {
        btn.textContent = btn.dataset.originalText;
      } else {
        btn.textContent = btn.textContent.replace('Show Less', 'Learn More');
      }
    });
    
    // Open the clicked section
    details.style.display = 'block';
    button.textContent = button.textContent.replace('Learn More', 'Show Less');
  }
}

// Collapse all product sections and reset toggle buttons
function resetAllProductExpansions() {
  const allDetails = document.querySelectorAll('.product-details');
  const allButtons = document.querySelectorAll('.learn-more-btn');
  allDetails.forEach(section => { section.style.display = 'none'; });
  allButtons.forEach(btn => {
    if (btn && btn.dataset && btn.dataset.originalText) {
      btn.textContent = btn.dataset.originalText;
    } else if (btn.textContent.includes('Show Less')) {
      btn.textContent = btn.textContent.replace('Show Less', 'Learn More');
    }
  });
}

// Helper function to convert GitHub Pages URL to raw GitHub URL
function getRawGitHubUrl(path) {
  console.log(`ðŸŒ Current hostname: ${window.location.hostname}`);
  
  // For EVR-RDY site, use the specific branch format
  if (window.location.hostname === 'evrrdy.com') {
    return `https://raw.githubusercontent.com/EVR-RDY/Site/main${path}`;
  }
  
  // For local development (127.0.0.1, localhost, etc.)
  if (window.location.hostname === '127.0.0.1' || 
      window.location.hostname === 'localhost' || 
      window.location.hostname.startsWith('192.168.') ||
      window.location.hostname.startsWith('10.') ||
      window.location.hostname.endsWith('.local')) {
    const localUrl = window.location.origin + path;
    console.log(`ðŸ  Using local development URL: ${localUrl}`);
    return localUrl;
  }
  
  const baseUrl = window.location.origin + window.location.pathname.replace('index.html', '');
  
  // Handle different GitHub Pages URL patterns
  // Always use main for GitHub Pages scenarios as well
  const parts = baseUrl.replace('https://', '').split('/');
  const username = parts[0].replace('.github.io', '');
  const repo = parts[1] || '';
  return `https://raw.githubusercontent.com/${username}/${repo}/main${path}`;
}

// Dynamic Resources Loading
async function loadResources() {
  try {
    const resourcesContainer = document.getElementById('resources-grid');
    if (!resourcesContainer) return;
    
    // Clear existing content
    resourcesContainer.innerHTML = '';
    
    // Try to get resource list from a manifest file first
    let resourceFiles = await getResourceManifest();
    
    // If no manifest, fall back to known files
    if (!resourceFiles || resourceFiles.length === 0) {
      resourceFiles = [
        'sample-whitepaper',
        'ghost-node-whitepaper'
      ];
    }
    
    // Load each resource
    for (const resourceId of resourceFiles) {
      try {
        // Use GitHub raw content URL for reliable markdown serving
        const rawUrl = getRawGitHubUrl(`/resources/markdown/${resourceId}.md`);
        console.log(`ðŸ” Fetching raw content from: ${rawUrl}`);
        
        const response = await fetch(rawUrl);
        
        if (!response.ok) {
          console.warn(`Failed to fetch ${resourceId}: ${response.status}`);
          continue;
        }
        
        const markdownContent = await response.text();
        console.log(`âœ… Fetched ${resourceId}.md successfully from raw GitHub`);
        
        const resource = parseMarkdownMetadata(markdownContent, resourceId);
        
        if (resource) {
          const resourceTile = createResourceTile(resource);
          resourcesContainer.appendChild(resourceTile);
        }
      } catch (error) {
        console.warn(`Failed to load resource ${resourceId}:`, error);
      }
    }
  } catch (error) {
    console.error('Failed to load resources:', error);
  }
}

// Try to load resource manifest file
async function getResourceManifest() {
  try {
    // Use GitHub raw content URL for reliable manifest serving
    const rawUrl = getRawGitHubUrl('/resources/manifest.json');
    const response = await fetch(rawUrl);
    if (!response.ok) return null;
    
    const manifest = await response.json();
    return manifest.files || null;
  } catch (error) {
    console.log('No manifest file found, using fallback list');
    return null;
  }
}

function parseMarkdownMetadata(markdownContent, resourceId) {
  // Parse frontmatter
  const frontmatterMatch = markdownContent.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) return null;
  
  const frontmatter = frontmatterMatch[1];
  const metadata = {};
  
  // Parse YAML-like frontmatter
  frontmatter.split('\n').forEach(line => {
    const match = line.match(/^(\w+):\s*["']?([^"']*)["']?$/);
    if (match) {
      metadata[match[1]] = match[2];
    }
  });
  
  return {
    id: resourceId,
    title: metadata.title || 'Document',
    description: metadata.description || 'No description available',
    type: metadata.type || 'Document',
    date: metadata.date || 'Unknown',
    icon: metadata.icon || 'ðŸ“„',
    content: markdownContent
  };
}

function createResourceTile(resource) {
  const tile = document.createElement('div');
  tile.className = 'resource-tile';
  tile.onclick = () => expandResource(resource);
  
  tile.innerHTML = `
    <div class="resource-icon">${resource.icon}</div>
    <h3>${resource.title}</h3>
    <p>${resource.description}</p>
    <div class="resource-meta">
      <span class="resource-type">${resource.type}</span>
      <span class="resource-date">${resource.date}</span>
    </div>
  `;
  
  return tile;
}


// Resources Modal Functionality
function openResourcesModal() {
  const modal = document.getElementById('resources-modal');
  if (modal) {
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
    // Load resources when modal opens
    loadResources();
  }
}

function closeResourcesModal() {
  const modal = document.getElementById('resources-modal');
  const expandedResource = document.getElementById('expanded-resource');
  if (modal) {
    modal.classList.remove('show');
    document.body.style.overflow = 'auto';
    // Close any expanded resource when closing modal
    if (expandedResource) {
      expandedResource.classList.remove('show');
    }
  }
}

// Team Modal Functionality
function openTeamModal() {
  const modal = document.getElementById('team-modal');
  if (modal) {
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
  }
}

function closeTeamModal() {
  const modal = document.getElementById('team-modal');
  if (modal) {
    modal.classList.remove('show');
    document.body.style.overflow = 'auto';
  }
}


function expandResource(resource) {
  const expandedResource = document.getElementById('expanded-resource');
  const contentElement = document.getElementById('expanded-resource-content');
  
  if (expandedResource && contentElement) {
    loadMarkdownContent(resource.id, contentElement);
    expandedResource.classList.add('show');
    document.body.style.overflow = 'hidden';
  }
}

function closeExpandedResource() {
  const expandedResource = document.getElementById('expanded-resource');
  if (expandedResource) {
    expandedResource.classList.remove('show');
    document.body.style.overflow = 'auto';
  }
}



async function loadMarkdownContent(resourceId, contentElement) {
  try {
    // Use GitHub raw content URL for reliable markdown serving
    const rawUrl = getRawGitHubUrl(`/resources/markdown/${resourceId}.md`);
    const response = await fetch(rawUrl);
    
    if (!response.ok) {
      contentElement.innerHTML = '<p>Content not found.</p>';
      return;
    }
    
    const markdownContent = await response.text();
    const resource = parseMarkdownMetadata(markdownContent, resourceId);
    
    if (resource) {
      // Remove frontmatter and convert markdown to HTML
      const contentWithoutFrontmatter = markdownContent.replace(/^---\n[\s\S]*?\n---\n/, '');
      const htmlContent = convertMarkdownToHtml(contentWithoutFrontmatter);
      contentElement.innerHTML = htmlContent;
    } else {
      contentElement.innerHTML = '<p>Failed to parse content.</p>';
    }
  } catch (error) {
    console.error('Failed to load markdown content:', error);
    contentElement.innerHTML = '<p>Error loading content.</p>';
  }
}

function convertMarkdownToHtml(markdown) {
  // Use marked.js library for proper markdown parsing
  if (typeof marked !== 'undefined') {
    // Configure marked options
    marked.setOptions({
      breaks: true, // Convert \n to <br>
      gfm: true, // GitHub Flavored Markdown
      sanitize: false, // Allow HTML (we trust our content)
      smartLists: true,
      smartypants: true
    });
    
    // Add target="_blank" to external links
    const renderer = new marked.Renderer();
    renderer.link = function(href, title, text) {
      const isExternal = href.startsWith('http') && !href.includes(window.location.hostname);
      const target = isExternal ? ' target="_blank" rel="noopener noreferrer"' : '';
      const titleAttr = title ? ` title="${title}"` : '';
      return `<a href="${href}"${titleAttr}${target}>${text}</a>`;
    };
    
    marked.setOptions({ renderer });
    
    return marked.parse(markdown);
  } else {
    // Fallback to simple conversion if marked.js isn't loaded
    console.warn('marked.js not loaded, using fallback markdown parser');
    return markdown
      .replace(/^# (.*$)/gim, '<h1>$1</h1>')
      .replace(/^## (.*$)/gim, '<h2>$1</h2>')
      .replace(/^### (.*$)/gim, '<h3>$1</h3>')
      .replace(/^#### (.*$)/gim, '<h4>$1</h4>')
      .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
      .replace(/\*(.*?)\*/g, '<em>$1</em>')
      .replace(/`([^`]+)`/g, '<code>$1</code>')
      .replace(/\n\n/g, '</p><p>')
      .replace(/\n/g, '<br>');
  }
}

// Modal Functionality
function openProductsModal() {
  const modal = document.getElementById('products-modal');
  console.log('Opening modal:', modal); // Debug log
  if (modal) {
    modal.classList.add('show');
    document.body.style.overflow = 'hidden'; // Prevent background scrolling
  } else {
    console.error('Modal element not found');
  }
}

function openModalToSection(sectionId) {
  const modal = document.getElementById('products-modal');
  const targetSection = document.getElementById(sectionId);
  
  if (modal && targetSection) {
    // Open the modal
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
    
    // Wait for modal to be visible, then scroll to section
    setTimeout(() => {
      const modalContent = modal.querySelector('.modal-content');
      const modalBody = modal.querySelector('.modal-body');
      
      // Calculate the position of the target section relative to the modal body
      const sectionTop = targetSection.offsetTop;
      const modalBodyTop = modalBody.offsetTop;
      const scrollPosition = sectionTop - modalBodyTop - 20; // 20px offset for better visibility
      
      // Scroll the modal content to the target section
      modalContent.scrollTo({
        top: scrollPosition,
        behavior: 'smooth'
      });
      
      // Add a temporary highlight effect to the target section
      targetSection.style.transition = 'all 0.3s ease';
      targetSection.style.background = 'rgba(169, 214, 138, 0.2)';
      targetSection.style.border = '2px solid var(--bright)';
      
      // Remove highlight after 3 seconds
      setTimeout(() => {
        targetSection.style.background = '';
        targetSection.style.border = '';
      }, 3000);
      
    }, 100); // Small delay to ensure modal is fully visible
  } else {
    console.error('Modal or target section not found');
  }
}

function closeProductsModal() {
  const modal = document.getElementById('products-modal');
  console.log('Closing modal:', modal); // Debug log
  if (modal) {
    modal.classList.remove('show');
    document.body.style.overflow = 'auto'; // Restore scrolling
    // Reset expanded sections and button labels on any modal close
    resetAllProductExpansions();
  }
}

// Ensure reset happens regardless of how the products modal is closed
document.addEventListener('DOMContentLoaded', function() {
  const productsModal = document.getElementById('products-modal');
  // Capture original labels for expand buttons
  document.querySelectorAll('.learn-more-btn').forEach(btn => {
    if (!btn.dataset.originalText) {
      btn.dataset.originalText = btn.textContent.trim();
    }
  });
  if (productsModal) {
    const observer = new MutationObserver((mutations) => {
      for (const m of mutations) {
        if (m.type === 'attributes' && m.attributeName === 'class') {
          if (!productsModal.classList.contains('show')) {
            resetAllProductExpansions();
          }
        }
      }
    });
    observer.observe(productsModal, { attributes: true, attributeFilter: ['class'] });
  }
});


// Close modals when clicking outside of them
window.onclick = function(event) {
  const productsModal = document.getElementById('products-modal');
  const resourcesModal = document.getElementById('resources-modal');
  const teamModal = document.getElementById('team-modal');
  const expandedResource = document.getElementById('expanded-resource');
  
  // Check if products modal is open and click is on the modal background
  if (productsModal && productsModal.classList.contains('show') && event.target === productsModal) {
    closeProductsModal();
  }
  
  // Check if resources modal is open and click is on the modal background
  if (resourcesModal && resourcesModal.classList.contains('show') && event.target === resourcesModal) {
    closeResourcesModal();
  }
  
  // Check if team modal is open and click is on the modal background
  if (teamModal && teamModal.classList.contains('show') && event.target === teamModal) {
    closeTeamModal();
  }
  
  // Note: Expanded resource click-outside is handled by direct onclick on the element
};

// Prevent default navigation on solution links so '#' doesn't jump page
document.addEventListener('click', function(e) {
  const link = e.target && e.target.closest && e.target.closest('a.solution-link');
  if (link) {
    e.preventDefault();
  }
});

// Close modals with Escape key
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    const productsModal = document.getElementById('products-modal');
    const resourcesModal = document.getElementById('resources-modal');
    const teamModal = document.getElementById('team-modal');
    const expandedResource = document.getElementById('expanded-resource');
    
    // First close expanded resource if open
    if (expandedResource && expandedResource.classList.contains('show')) {
      closeExpandedResource();
    }
    // Then close resources modal if open
    else if (resourcesModal && resourcesModal.classList.contains('show')) {
      closeResourcesModal();
    }
    // Then close team modal if open
    else if (teamModal && teamModal.classList.contains('show')) {
      closeTeamModal();
    }
    // Finally close products modal if open
    else if (productsModal && productsModal.classList.contains('show')) {
      closeProductsModal();
    }
  }
});

// Progressive Disclosure Functionality for main page (non-modal)
function toggleDetails(detailsId) {
  const details = document.getElementById(detailsId);
  const button = event.target;
  
  if (details.classList.contains('expanded')) {
    details.classList.remove('expanded');
    if (button.textContent.includes('Hide')) {
      if (button.textContent.includes('Timeline')) {
        button.textContent = 'View Full Timeline';
      }
    }
  } else {
    // Close all other expanded sections first (accordion behavior)
    const allExpandableDetails = document.querySelectorAll('.expandable-details.expanded');
    allExpandableDetails.forEach(expandedDetail => {
      if (expandedDetail.id !== detailsId) {
        expandedDetail.classList.remove('expanded');
        const closedButton = document.querySelector(`[onclick="toggleDetails('${expandedDetail.id}')"]`);
        if (closedButton) {
          if (closedButton.textContent.includes('Hide Timeline')) {
            closedButton.textContent = 'View Full Timeline';
          }
        }
      }
    });
    
    details.classList.add('expanded');
    if (button.textContent.includes('View Full Timeline')) {
      button.textContent = 'Hide Timeline';
    }
    
    setTimeout(() => {
      details.scrollIntoView({ 
        behavior: 'smooth', 
        block: 'start' 
      });
    }, 100);
  }
}

// Update year
document.getElementById('y').textContent = new Date().getFullYear();

// Resources will be loaded when the modal opens
</script>

</body>
</html>
